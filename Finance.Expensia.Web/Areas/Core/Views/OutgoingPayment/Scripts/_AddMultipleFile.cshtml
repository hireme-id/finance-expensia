<script>
    window.addEventListener("load", () => {
        const input = document.getElementById("files");
        const filewrapper = document.getElementById("filewrapper");
        input.addEventListener("change", (e) => {
            let fileName = e.target.files[0].name;
            let filetype = e.target.value.split(".").pop();
            let file = e.target.files[0];
            fileshow(fileName, filetype, file);
        })
    });

    const fileshow = (fileName, filetype, myFile) => {
        const showfileboxElem = document.createElement("div");
        showfileboxElem.classList.add("showfilebox");
        const leftElem = document.createElement("div");
        leftElem.classList.add("left");

        if (['PNG', 'JPG', 'JPEG', 'JFIF', 'BMP'].includes(filetype.toUpperCase())) {
            const reader = new FileReader();
            const fileTypeElem = document.createElement("img");
            fileTypeElem.classList.add("imgtype");
            reader.onload = function (event) {
                fileTypeElem.src = event.target.result;
            }
            reader.readAsDataURL(myFile);

            leftElem.append(fileTypeElem);
        }

        const filetitleElem = document.createElement("p");
        filetitleElem.innerHTML = fileName;
        leftElem.append(filetitleElem);
        showfileboxElem.append(leftElem);
        const rightElem = document.createElement("div");
        rightElem.classList.add("right");
        showfileboxElem.append(rightElem);
        const crossElem = document.createElement("i");
        crossElem.classList.add("fa");
        crossElem.classList.add("fa-trash");
        crossElem.classList.add("icon-trash");
        rightElem.append(crossElem);
        filewrapper.append(showfileboxElem);

        crossElem.addEventListener("click", () => {
            filewrapper.removeChild(showfileboxElem);
        });
    }
</script>